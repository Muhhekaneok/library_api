# Library API — Тестовый проект со стажировки

## Описание

RESTful API для управления библиотекой.
Реализована базовая аутентификация, управление книгами и регистрация пользователей.
Проект написан на Python с использованием FastAPI и PostgreSQL (через psycopg2).

## Установка и запуск

1. Клонируй репозиторий:
   git clone git@github.com:.../library_api.git
2. Установи зависимости:
   pip install -r requirements.txt
3. Зпусти команду:
   uvicorn app.main:app --reload
4. Используй Swagger для документации:
   http://127.0.0.1:8000/docs

## Аутентификация

### Регистрация (POST /register)

* Принимает: email и password
* Пароль хешируется с помощью bcrypt (passlib)
* Email валидируется через Pydantic (EmailStr)
* Защита от повторной регистрации с тем же email (ошибка 400)

### Логин (POST /login)

* Принимает email и password
* Ищет пользователя в базе
* Проверяет пароль (verify_password)
* Генерирует JWT токен с exp (время действия)

### JWT

* Алгоритм: HS256
* Время действия: 45 минут (константа ACCESS_TOKEN_EXPIRE_MINUTES)
* Используется ключ SECRET_KEY
* Токен возвращается в формате:
{
  "token": "<token>",
  "type": "owner"
}

## Принятые решения

* Использован python-jose[cryptography], т.е. по документации рекомендуется использовать именно его, а не просто
  python-jose из-за его современности и более высокой безопасности.
* psycopg2 используется напрямую без ORM, чтобы реализовать проект поэтапно. В дальнейшем планирую задействовать ORM.
* Все основные параметры (SECRET_KEY, ALGORITHM, ACCESS_TOKEN_EXPIRE_MINUTES) оформлены как константы, чтобы не
  использовать стиль хардкод